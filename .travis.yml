language: python
stages:
- test
- name: deploy
  if: repo = ESSS/oop-ext AND tag IS present
install:
- pip install -U pip
- pip install -U tox
script:
- tox
jobs:
  include:
  - python: '3.6'
    env: TOXENV=linting
  - python: '3.6'
    env: TOXENV=docs
  - python: '3.6'
    env: TOXENV=py36
  - python: '3.7'
    env: TOXENV=py37
    sudo: required
    dist: xenial
  - stage: deploy
    python: '3.6'
    env:
    install: pip install -U setuptools setuptools_scm
    script: skip
    deploy:
      provider: pypi
      distributions: sdist bdist_wheel
      user: lincrosenbach
      password:
        secure: HE8N7znfi2443yXiYw/uxabw2661HIxynIxqdruuzqf/uUpxjUm18G6xSNPBhLLXcKdJIS3gboXVFavN+HficIE1jU7eZEmXVEXX4IeuL1gUUvlSDdqPnEczjYAJ51uqxP6SsZrmmp8QJ46hYQp6PYgDNrc/QViiPb/f0MpgpRCiXePukaDM/LFPmP4osmwRz35kdz2lGOVKidQpMJmlf8KXWT6SXSNYrN7f988dpnMCeCYdoQ7e9Q1sQ48tpC7Xe7zggIQ6FlvWh/3azKyHK4l1EoCn4s0KjnyJfrW9pmyTWnWsEMIc3jeNq9bvC88ab1hyGy4RigjCnBLXnCbxRMWqMpos2yvUwqAKKdkZ3A7yjAAYwea706c9TNX6ORr8Bz+zd+sEStZp267vPZ2CRLi2hSUnmyMXYoPWZE2eWrX8sgmi4FLn1VAw/PD4b4ggdRdMCz9E7I7HRGULfpkBr7ONh2J4aKxhxZ4VGJp3B+sLiOZ5Oy9eHE1qQ2GHY9ROJuT2/Pp7+og/CUfSIN6tHxo9RtLfqsCMsZYGDiyVYxmAsIioXA8O2pn9HWaYf9tQ2YgLEN5vYFKj5JrcD57M7qevVKgYWUzJEdSmRECVVwhveI3jma/gaTznoIWz+LJD1yIQgshrktuxJsMB2Hd1u/TNq2PrJYgoKW4+IxwTGmM=
      on:
        tags: true
        repo: ESSS/oop-ext
        python: 3.6
branches:
  only:
  - master
  - "/v(\\d+\\.)*\\d/"
